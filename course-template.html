<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[COURSE_TITLE] - DrTroy CE</title>
    <style>
        @page { size: letter; margin: 0.75in; @bottom-center { content: counter(page); font-size: 10pt; color: #666; } }
        * { box-sizing: border-box; }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 16px;
            line-height: 1.7;
            color: #333;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }

        .content-wrapper {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px 60px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* Access Control Styles */
        .access-denied {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border: 2px solid #fecaca;
            border-radius: 8px;
            margin: 40px auto;
        }
        .access-denied h2 {
            color: #dc2626;
            margin-bottom: 20px;
        }
        .access-denied p {
            color: #666;
            margin-bottom: 30px;
        }
        .purchase-btn {
            display: inline-block;
            background: #d69e2e;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s;
        }
        .purchase-btn:hover {
            background: #b7791f;
        }
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        @media (max-width: 900px) {
            .content-wrapper {
                padding: 30px 40px;
                margin: 0 20px;
            }
        }

        @media (max-width: 600px) {
            .content-wrapper {
                padding: 20px;
                margin: 0 10px;
            }
            body {
                font-size: 15px;
                line-height: 1.6;
            }
        }

        /* Course Content Styles */
        .cover-page {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }
        .cover-page h1 {
            font-size: 28px;
            color: #1a365d;
            margin-bottom: 20px;
            line-height: 1.3;
        }
        .cover-page .subtitle {
            font-size: 16px;
            color: #d69e2e;
            margin-bottom: 40px;
        }
        .cover-page .course-info {
            font-size: 14px;
            color: #666;
            margin-top: 60px;
        }
        .cover-page img {
            max-width: 250px;
            height: auto;
        }
        h1 {
            font-size: 22px;
            color: #1a365d;
            border-bottom: 2px solid #d69e2e;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        h2 {
            font-size: 18px;
            color: #2c5282;
            margin-top: 30px;
        }
        h3 {
            font-size: 16px;
            color: #333;
            font-weight: bold;
            margin-top: 25px;
        }
        p {
            margin: 12px 0;
            text-align: left;
        }
        ul, ol {
            margin: 12px 0;
            padding-left: 25px;
        }
        li {
            margin: 8px 0;
        }
        .test-box {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        .caution-box {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-left: 4px solid #ef4444;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        .tip-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-left: 4px solid #22c55e;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <!-- Loading State -->
    <div class="content-wrapper" id="loadingState">
        <div class="loading">
            <h2>üîç Verifying Course Access...</h2>
            <p>Please wait while we check your enrollment status.</p>
        </div>
    </div>

    <!-- Access Denied State -->
    <div class="content-wrapper" id="accessDenied" style="display: none;">
        <div class="access-denied">
            <h2>üîí Course Access Required</h2>
            <p>This course is part of our premium continuing education packages. Please purchase a package to access this content.</p>
            <p><strong>Course:</strong> [COURSE_ID] - [COURSE_TITLE]<br>
            <strong>Credits:</strong> [COURSE_CREDITS] CCUs<br>
            <strong>Approval #:</strong> [APPROVAL_NUMBER]</p>
            <a href="../index.html#packages" class="purchase-btn">View Packages & Purchase</a>
        </div>
    </div>

    <!-- Course Content -->
    <div class="content-wrapper" id="courseContent" style="display: none;">

        <div class="cover-page">
            <img src="images/drtroy_logo.png" alt="DrTroy Continuing Education" style="max-width: 250px; margin-bottom: 30px;">
            <h1>[COURSE_TITLE]</h1>
            <div class="subtitle">[COURSE_SUBTITLE]</div>
            <div class="course-info">
                <p><strong>Course #[COURSE_ID] ‚Ä¢ [COURSE_CREDITS] CCUs</strong></p>
                <p><strong>Approval #:</strong> [APPROVAL_NUMBER]</p>
                <p><strong>Provider:</strong> DrTroy Continuing Education</p>
                <p><strong>[COURSE_COVERAGE_INFO]</strong></p>
            </div>
        </div>

        ---

        ## Course Information

        ## Course Description

        [COURSE_DESCRIPTION]

        ## Target Audience

        [TARGET_AUDIENCE]

        ## Course Objectives

        Upon completion of this course, participants will be able to:

        [LEARNING_OBJECTIVES]

        ## Instructional Method

        [INSTRUCTIONAL_METHOD_INFO]

        ## Course Instructor

        **Troy Hounshell, PT, ScD**

        Dr. Hounshell is a physical therapist with over 25 years of clinical experience across outpatient, inpatient, home health, and skilled nursing settings. He is the CEO of Texas Therapy Pros and holds a Doctor of Science in Physical Therapy from Texas Tech University Health Sciences Center.

        ## Disclosure Statement

        **Financial Disclosure:** Troy Hounshell, PT, ScD is the owner of Texas Therapy Pros and DrTroy Continuing Education, the company selling this course. He receives financial compensation from course sales. This relationship has been reviewed and the content has been developed to ensure objectivity and balance in presentation.

        **Non-Financial Disclosure:** The instructor has no other non-financial relationships to disclose that would create a conflict of interest regarding this educational activity.

        **Content Development:** The content of this course was developed based on current evidence-based practice and established clinical guidelines. All recommendations are supported by peer-reviewed literature and standard physical therapy practice patterns.

        ## Completion Requirements

        To successfully complete this course and receive continuing education credit, participants must:

        - Review all course materials
        - Complete the knowledge check with a score of 70% or higher
        - Complete the course evaluation

        ---

        [COURSE_CONTENT_MODULES]

        ---

        **Course Completed Successfully**

        Thank you for completing "[COURSE_TITLE]." Your certificate will be available for download upon successful completion of the knowledge check and course evaluation.

        **For questions or support, contact:**
        Troy Hounshell, PT, ScD
        Email: troyh@texastherapypros.com

    </div>

    <script>
        // Course Access Control System
        const COURSE_ID = '[COURSE_ID]';
        
        // Package to Course Mapping
        const PACKAGE_COURSES = {
            'PT': ['PT-MSK-001', 'MOBILITY-001', 'BALANCE-001', 'EXERCISE-001', 'GERIATRIC-001', 'DOCUMENTATION-001', 'MODALITIES-001', 'NEURO-001', 'INFECTION-001'],
            'PTA': ['MOBILITY-001', 'EXERCISE-001', 'DOCUMENTATION-001', 'MODALITIES-001', 'INFECTION-001', 'EDUCATION-001'],
            'OT': ['OT-ADL-001', 'MOBILITY-001', 'BALANCE-001', 'EXERCISE-001', 'DOCUMENTATION-001', 'MODALITIES-001', 'NEURO-001', 'EDUCATION-001'],
            'COTA': ['MOBILITY-001', 'BALANCE-001', 'EXERCISE-001', 'GERIATRIC-001', 'DOCUMENTATION-001', 'MODALITIES-001', 'NEURO-001', 'EDUCATION-001']
        };

        // Check if user has access to this course
        function checkCourseAccess() {
            console.log('üîç Checking course access for:', COURSE_ID);
            
            // Get user account data
            const accountData = localStorage.getItem('drtroyAccount');
            if (!accountData) {
                console.log('‚ùå No user account found');
                return false;
            }
            
            try {
                const account = JSON.parse(accountData);
                
                // Check if user is logged in
                const userSession = localStorage.getItem('userSession');
                if (!userSession || userSession !== 'active') {
                    console.log('‚ùå User not logged in');
                    return false;
                }
                
                // Check enrolled courses
                if (account.enrolledCourses && Array.isArray(account.enrolledCourses)) {
                    const hasAccess = account.enrolledCourses.includes(COURSE_ID);
                    console.log('üìö Enrolled courses:', account.enrolledCourses);
                    console.log(hasAccess ? '‚úÖ Course access granted' : '‚ùå Course access denied');
                    return hasAccess;
                }
                
                console.log('‚ùå No enrolled courses found');
                return false;
                
            } catch (error) {
                console.error('Error checking course access:', error);
                return false;
            }
        }

        // Initialize page based on access
        function initializePage() {
            setTimeout(() => {
                const hasAccess = checkCourseAccess();
                
                const loadingState = document.getElementById('loadingState');
                const accessDenied = document.getElementById('accessDenied');
                const courseContent = document.getElementById('courseContent');
                
                if (hasAccess) {
                    // Show course content
                    loadingState.style.display = 'none';
                    accessDenied.style.display = 'none';
                    courseContent.style.display = 'block';
                    
                    // Track course start
                    trackCourseStart();
                    
                } else {
                    // Show access denied
                    loadingState.style.display = 'none';
                    accessDenied.style.display = 'block';
                    courseContent.style.display = 'none';
                }
            }, 1500);
        }

        // Track course start for analytics
        function trackCourseStart() {
            const accountData = localStorage.getItem('drtroyAccount');
            if (accountData) {
                try {
                    const account = JSON.parse(accountData);
                    
                    // Initialize course progress if not exists
                    if (!account.courseProgress) {
                        account.courseProgress = {};
                    }
                    
                    if (!account.courseProgress[COURSE_ID]) {
                        account.courseProgress[COURSE_ID] = {
                            startedAt: new Date().toISOString(),
                            lastAccessedAt: new Date().toISOString(),
                            completedModules: [],
                            completed: false
                        };
                    } else {
                        // Update last accessed
                        account.courseProgress[COURSE_ID].lastAccessedAt = new Date().toISOString();
                    }
                    
                    localStorage.setItem('drtroyAccount', JSON.stringify(account));
                    console.log('üìä Course progress tracked');
                    
                } catch (error) {
                    console.error('Error tracking course start:', error);
                }
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
        });

        // Emergency access for testing
        window.grantEmergencyAccess = function() {
            const accountData = localStorage.getItem('drtroyAccount');
            if (accountData) {
                const account = JSON.parse(accountData);
                if (!account.enrolledCourses) account.enrolledCourses = [];
                if (!account.enrolledCourses.includes(COURSE_ID)) {
                    account.enrolledCourses.push(COURSE_ID);
                    localStorage.setItem('drtroyAccount', JSON.stringify(account));
                    console.log('üÜò Emergency access granted');
                    location.reload();
                }
            }
        };
    </script>
</body>
</html>